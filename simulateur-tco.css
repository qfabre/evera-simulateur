/* ═══════════════════════════════════
   EVERA — Simulateur TCO
   Design System + Styles
   ═══════════════════════════════════ */
:root {
  --noir: #131B1D;
  --noir-95: rgba(19,27,29,0.95);
  --noir-light: #1E2A2D;
  --blanc: #FFFFFF;
  --bleu: #EDF5FA;
  --bleu-fonce: #63768D;
  --vert-eau: #D0EDED;
  --vert-pastel: #E2F3F2;
  --beige: #F7F5F3;
  --text: #131B1D;
  --text-2: #63768D;
  --text-3: #9AACB8;
  --border: #E0E7EB;
  --border-light: #EDF1F4;
  --surface: #FFFFFF;
  --surface-alt: #F7F9FB;
  --success: #D0EDED;
  --success-bg: #E2F3F2;
  --danger: #D44444;
  --danger-bg: #FEF2F2;
  --radius: 12px;
  --radius-sm: 8px;
  --radius-xs: 6px;
  --shadow: 0 1px 2px rgba(19,27,29,0.04), 0 3px 10px rgba(19,27,29,0.05);
  --shadow-lg: 0 4px 12px rgba(19,27,29,0.06), 0 12px 32px rgba(19,27,29,0.08);
  --c-loyer: #131B1D;
  --c-energie: #E8943A;
  --c-entretien: #63768D;
  --c-assurance: #1A8A84;
  --c-fiscalite: #C4554E;
}

/* ── Aggressive Webflow reset ── */
.sim,.sim *,.sim *::before,.sim *::after{box-sizing:border-box!important;min-height:0!important;min-width:0!important;max-height:none;float:none!important;clear:none!important;flex:initial;align-self:auto!important;overflow:visible}
.sim{
  max-width:820px!important;margin:0 auto!important;padding:40px 20px 80px!important;
  font-family:'Inter',sans-serif!important;
  background:var(--beige)!important;
  color:var(--text)!important;
  line-height:1.55!important;
  -webkit-font-smoothing:antialiased;
  display:block!important;
  width:100%!important;
  height:auto!important;
  position:relative!important;
}
.sim div{margin:0!important;padding:0!important;height:auto!important;min-height:0!important;max-width:none!important}
.sim article,.sim aside{margin:0!important;padding:0!important;height:auto!important;min-height:0!important;max-width:none!important;display:block!important}
.sim section{margin:0!important;height:auto!important;min-height:0!important;max-width:none!important;display:block!important}
.sim span,.sim p,.sim a,.sim button,.sim label{margin:0;padding:0}
.sim h1,.sim h2,.sim h3,.sim h4,.sim h5,.sim h6{margin:0!important;padding:0!important}
.sim div,.sim section,.sim article,.sim aside,.sim span,.sim p,.sim h1,.sim h2,.sim h3,.sim h4,.sim h5,.sim h6,
.sim a,.sim button,.sim input,.sim select,.sim label,.sim table,.sim tr,.sim td,.sim th{
  font-family:inherit!important;line-height:inherit!important;color:inherit;
  border:none;outline:none;background:none;
  text-decoration:none!important;
  -webkit-font-smoothing:antialiased;
  letter-spacing:normal!important;
  text-transform:none!important;
}
.sim img{max-width:100%!important;height:auto!important;display:block!important}
.sim a{color:inherit!important}
.sim input,.sim select{font-family:inherit!important;font-size:inherit!important;margin:0!important}

/* ── Card (class=evc to avoid Webflow .card collision) ── */
.sim .evc{
  background:var(--surface)!important;border:1px solid var(--border)!important;
  border-radius:var(--radius)!important;box-shadow:var(--shadow)!important;
  margin-bottom:16px!important;overflow:hidden!important;
  padding:24px 24px 20px!important;height:auto!important;
}
.sim .evc-sm{padding:16px 20px!important}
.sim .evc-np{padding:0!important}
@media(max-width:600px){.sim .evc{padding:18px 14px 16px!important}.sim .evc-sm{padding:14px 14px!important}.sim .evc-np{padding:0!important}}

.sim .sec-title{
  font-family:'Manrope',sans-serif;font-size:15px;font-weight:700;
  color:var(--text);margin-bottom:20px!important;
  display:flex;align-items:center;gap:8px;
}
.sim .sec-title .st-ico{display:flex;align-items:center;flex-shrink:0;color:var(--bleu-fonce)}
.sim .sec-title .st-ico svg{width:18px;height:18px}
.sim .ico{width:18px;height:18px;vertical-align:-0.125em;fill:none;stroke:currentColor;display:inline-block;flex-shrink:0}

/* ── Category selector ── */
.sim .cat-grid{display:grid!important;grid-template-columns:repeat(4,1fr)!important;gap:8px!important;margin-bottom:8px!important}
@media(max-width:640px){.sim .cat-grid{grid-template-columns:1fr 1fr!important}}
.sim .cat-card{
  border:1.5px solid var(--border);border-radius:var(--radius-sm);
  padding:10px 10px!important;cursor:pointer;transition:all 0.2s;
  background:var(--surface);text-align:center;
}
.sim .cat-card:hover{border-color:#D0EDED;background:rgba(208,237,237,0.25)}
.sim .cat-card.active{border-color:#D0EDED;background:#D8F3F2;color:var(--noir)}
.sim .cc-icon{margin-bottom:4px!important;color:var(--bleu-fonce)}
.sim .cc-icon svg{width:20px;height:20px}
.sim .cat-card.active .cc-icon{color:var(--bleu-fonce)}
.sim .cc-label{font-family:'Manrope',sans-serif;font-size:12.5px;font-weight:700;color:var(--text)}

/* ── Motorisation selector ── */
.sim .moto-grid{display:grid!important;grid-template-columns:repeat(5,1fr)!important;gap:8px!important;margin-bottom:8px!important}
@media(max-width:640px){.sim .moto-grid{grid-template-columns:repeat(3,1fr)!important}}
.sim .moto-card{
  border:1.5px solid var(--border);border-radius:var(--radius-sm);
  padding:10px 10px!important;cursor:pointer;transition:all 0.2s;
  background:var(--surface);text-align:center;
}
.sim .moto-card:hover{border-color:#D0EDED;background:rgba(208,237,237,0.25)}
.sim .moto-card.active{border-color:#D0EDED;background:#D8F3F2;color:var(--noir)}
.sim .mc-icon{margin-bottom:4px!important;color:var(--bleu-fonce)}
.sim .mc-icon svg{width:20px;height:20px}
.sim .moto-card.active .mc-icon{color:var(--bleu-fonce)}
.sim .mc-label{font-family:'Manrope',sans-serif;font-size:12.5px;font-weight:700;color:var(--text)}

/* ── Toggle row ── */
.sim .toggle-row{display:flex!important;
  align-items:center;justify-content:space-between;
  padding:14px 16px;background:var(--surface-alt);border-radius:var(--radius-sm);
  margin-bottom:8px;
}
.sim .toggle-label{font-size:13px;color:var(--text);font-weight:500;max-width:80%}
.sim .toggle-label small{display:block;font-size:12px;color:var(--text-3);font-weight:400;margin-top:2px}
.sim .toggle{
  width:44px;height:24px;border-radius:12px;background:var(--border);
  position:relative;cursor:pointer;transition:background 0.2s;flex-shrink:0;
}
.sim .toggle.on{background:var(--noir)}
.sim .toggle::after{
  content:'';position:absolute;top:3px;left:3px;width:18px;height:18px;
  border-radius:50%;background:var(--blanc);transition:transform 0.2s;
  box-shadow:0 1px 3px rgba(0,0,0,0.15);
}
.sim .toggle.on::after{transform:translateX(20px)}

/* ── Form ── */
.sim .grid{display:grid!important;gap:14px!important}
.sim .g2{grid-template-columns:1fr 1fr!important}
.sim .g3{grid-template-columns:1fr 1fr 1fr!important}
@media(max-width:640px){.sim .g2,.sim .g3{grid-template-columns:1fr!important}}
.sim .label{
  font-size:13px;font-weight:600;color:var(--text-2);margin-bottom:6px!important;
  display:flex;align-items:center;gap:5px;
}
.sim .label .ico{width:14px;height:14px;color:var(--text-3);flex-shrink:0}
.sim .tip{
  display:inline-flex;align-items:center;justify-content:center;
  width:14px;height:14px;border-radius:50%;
  background:var(--surface-alt);border:1px solid var(--border);
  color:var(--text-3);font-size:8px;font-weight:800;cursor:help;position:relative;
}
.sim .tip::after{
  content:attr(data-t);position:absolute;bottom:calc(100% + 8px);
  left:50%;transform:translateX(-50%);background:var(--noir);color:var(--blanc);
  padding:8px 12px;border-radius:8px;font-size:13px;font-weight:400;
  line-height:1.4;width:max-content;max-width:220px;
  opacity:0;pointer-events:none;transition:opacity 0.15s;z-index:50;
  box-shadow:0 8px 24px rgba(0,0,0,0.15);
}
.sim .tip:hover::after{opacity:1}
.sim .input-wrap{position:relative}
.sim .input{display:block!important;
  width:100%!important;height:44px!important;padding:0 14px!important;
  border:1.5px solid var(--border)!important;border-radius:var(--radius-sm)!important;
  font-family:'Inter',sans-serif!important;font-size:14px!important;font-weight:500;
  color:var(--text)!important;background:var(--surface)!important;outline:none;
  transition:border-color 0.2s,box-shadow 0.2s;
}
.sim .input:focus{border-color:var(--noir);box-shadow:0 0 0 3px rgba(19,27,29,0.06)}
.sim .input.has-u{padding-right:80px!important}
.sim .input.input-err{border-color:var(--danger)!important;background:var(--danger-bg)!important}
.sim .unit{
  position:absolute;right:12px;top:50%;transform:translateY(-50%);
  font-size:11px;font-weight:600;color:var(--text-3);
  background:var(--surface-alt);padding:2px 8px;border-radius:4px;pointer-events:none;
}
.sim .select{display:block!important;
  width:100%!important;height:44px!important;padding:0 34px 0 14px!important;
  border:1.5px solid var(--border)!important;border-radius:var(--radius-sm)!important;
  font-family:'Inter',sans-serif!important;font-size:14px!important;font-weight:500;color:var(--text)!important;
  background:var(--surface) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' fill='none' stroke='%2363768D' stroke-width='2'%3E%3Cpath d='M1 3l4 4 4-4'/%3E%3C/svg%3E") no-repeat right 14px center;
  appearance:none;cursor:pointer;outline:none;transition:border-color 0.2s;
}
.sim .select:focus{border-color:var(--noir);box-shadow:0 0 0 3px rgba(19,27,29,0.06)}

/* ── Sliders ── */
.sim .slider-group{margin-bottom:4px!important}
.sim .slider-header{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:10px!important}
.sim .slider-header .sh-label{font-size:13px;font-weight:600;color:var(--text-2)}
.sim .slider-header .sh-value{font-family:'JetBrains Mono',monospace;font-size:15px;font-weight:700;color:var(--text)}
.sim .slider{
  -webkit-appearance:none;appearance:none;width:100%;height:6px;
  border-radius:3px;background:var(--border);outline:none;cursor:pointer;
}
.sim .slider::-webkit-slider-runnable-track{height:6px;border-radius:3px;background:inherit}
.sim .slider::-webkit-slider-thumb{
  -webkit-appearance:none;width:22px;height:22px;border-radius:50%;margin-top:-8px;
  background:var(--noir);border:3px solid var(--blanc);
  box-shadow:0 1px 4px rgba(0,0,0,0.2);cursor:pointer;
}
.sim .slider::-moz-range-thumb{
  width:22px;height:22px;border-radius:50%;
  background:var(--noir);border:3px solid var(--blanc);
  box-shadow:0 1px 4px rgba(0,0,0,0.2);cursor:pointer;
}
.sim .slider::-moz-range-progress{height:6px;border-radius:3px;background:var(--bleu-fonce)}
.sim .slider-ticks{display:flex;justify-content:space-between;font-size:10px;color:var(--text-3);margin-top:6px!important;font-weight:500}

/* ── Recharge split ── */
.sim .recharge-split{display:flex;gap:12px;margin-top:14px!important}
.sim .recharge-split-item{flex:1;padding:12px 14px!important;border-radius:var(--radius-sm);text-align:center;border:1.5px solid}
.sim .recharge-split-item.rs-dom{background:rgba(26,138,132,0.06);border-color:rgba(26,138,132,0.2)}
.sim .recharge-split-item.rs-borne{background:rgba(232,148,58,0.06);border-color:rgba(232,148,58,0.2)}
.sim .recharge-split-item .rs-pct{font-family:'JetBrains Mono',monospace;font-size:18px;font-weight:700}
.sim .rs-dom .rs-pct{color:#1A8A84}
.sim .rs-borne .rs-pct{color:#E8943A}
.sim .recharge-split-item .rs-label{font-size:10.5px;color:var(--text-3);margin-top:2px}

.sim .frais-summary{
  display:flex;align-items:center;justify-content:space-between;
  padding:12px 16px!important;background:var(--bleu);border-radius:var(--radius-sm);margin-top:12px!important;
}
.sim .frais-summary .fs-label{font-size:13px;color:var(--bleu-fonce);font-weight:500}
.sim .frais-summary .fs-value{font-family:'JetBrains Mono',monospace;font-size:15px;font-weight:700;color:var(--text)}

/* ── Fleet presets ── */
.sim .fleet-presets{display:flex!important;align-items:center;gap:6px}
.sim .fp{
  height:34px;min-width:42px;padding:0 10px;
  border:1.5px solid var(--border);border-radius:100px;background:var(--surface);
  font-family:'JetBrains Mono',monospace;font-size:12.5px;font-weight:600;
  color:var(--text);cursor:pointer;transition:all 0.2s;
}
.sim .fp:hover{border-color:#D0EDED;background:rgba(208,237,237,0.25)}
.sim .fp.active{border-color:#D0EDED;background:#D8F3F2;color:var(--noir)}
@media(max-width:480px){
  .sim .fleet-presets{flex-wrap:wrap}
  .sim .fp{min-width:36px;height:30px;font-size:11px}
}

/* ── CTA ── */
.sim .cta-wrap{margin:28px 0 12px!important}
.sim .btn-calc{display:flex!important;
  width:100%;height:52px;align-items:center;justify-content:center;gap:8px;
  background:var(--noir)!important;color:var(--blanc)!important;border:none!important;border-radius:100px!important;
  font-family:'Manrope',sans-serif!important;font-size:15px!important;font-weight:700;
  cursor:pointer;transition:all 0.2s;
}
.sim .btn-calc:hover{box-shadow:0 0 0 2px var(--blanc) inset}
.sim .btn-calc svg{width:18px;height:18px}

/* ══════════════════════════════════
   MODAL — horizontal split layout
   ══════════════════════════════════ */
.sim .modal-overlay{
  position:fixed;inset:0;background:rgba(19,27,29,0.55);backdrop-filter:blur(6px);
  display:none;align-items:center;justify-content:center;z-index:1000;padding:20px;
}
.sim .modal-overlay.open{display:flex;animation:fadeIn 0.2s ease}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.sim .modal{
  background:var(--surface)!important;border-radius:16px!important;width:100%!important;max-width:820px!important;
  box-shadow:0 20px 60px rgba(19,27,29,0.25)!important;animation:slideUp 0.3s ease;
  overflow:hidden!important;position:relative!important;max-height:95vh!important;overflow-y:auto!important;
  display:grid!important;grid-template-columns:2fr 3fr!important;
}
@media(max-width:700px){
  .sim .modal{grid-template-columns:1fr!important;max-width:460px!important}
}
@keyframes slideUp{from{opacity:0;transform:translateY(20px) scale(0.98)}to{opacity:1;transform:translateY(0) scale(1)}}
.sim .modal-left{
  background:linear-gradient(170deg, #1E2A2D 0%, #131B1D 50%, #0D1315 100%)!important;
  padding:36px 28px!important;color:var(--blanc)!important;
  display:flex!important;flex-direction:column!important;justify-content:center!important;position:relative!important;overflow:hidden!important;
}
.sim .modal-left::before{
  content:'';position:absolute;top:-40%;right:-40%;width:300px;height:300px;
  background:radial-gradient(circle,rgba(255,255,255,0.06) 0%,transparent 70%);pointer-events:none;
}
.sim .modal-left::after{
  content:'';position:absolute;bottom:-30%;left:-20%;width:200px;height:200px;
  background:radial-gradient(circle,rgba(255,255,255,0.04) 0%,transparent 70%);pointer-events:none;
}
.sim .ml-badge{
  display:inline-flex;align-items:center;gap:5px;width:fit-content;
  background:rgba(255,255,255,0.15);color:rgba(255,255,255,0.9);
  font-family:'Manrope',sans-serif;font-size:10px;font-weight:700;
  text-transform:uppercase;letter-spacing:0.8px;
  padding:5px 13px!important;border-radius:100px;margin-bottom:18px!important;position:relative;
}
.sim .ml-title{
  font-family:'Manrope',sans-serif;font-size:clamp(20px,3vw,25px);
  font-weight:800;line-height:1.25;margin-bottom:10px!important;position:relative;
}
.sim .ml-savings{
  font-family:'JetBrains Mono',monospace;
  font-size:clamp(28px,5vw,36px);font-weight:700;
  color:var(--vert-eau);line-height:1;margin:8px 0 4px!important;
  letter-spacing:-1px;position:relative;
  text-shadow:0 2px 12px rgba(0,0,0,0.15);
}
.sim .ml-savings-label{font-size:12px;opacity:0.5;font-weight:400;position:relative;margin-bottom:26px!important}
.sim .ml-features{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:16px;position:relative}
.sim .ml-feat{display:flex;align-items:flex-start;gap:12px}
.sim .ml-feat-icon{
  width:30px!important;height:30px!important;min-width:30px!important;border-radius:7px!important;
  background:rgba(255,255,255,0.15)!important;
  display:flex!important;align-items:center!important;justify-content:center!important;
}
.sim .ml-feat-icon .ico{width:16px;height:16px;color:var(--blanc)}
.sim .ml-feat-text{font-size:14px;line-height:1.45;opacity:0.92}
.sim .ml-feat-text strong{font-weight:700;opacity:1}
.sim .ml-trust{
  margin-top:26px!important;padding-top:18px!important;border-top:1px solid rgba(255,255,255,0.12);
  font-size:12px;opacity:0.5;position:relative;line-height:1.5;
}
.sim .modal-right{padding:34px 30px 28px!important;position:relative;overflow-y:auto;max-height:95vh}
@media(max-width:700px){.sim .modal-right{padding:24px 22px 22px!important}}
.sim .mr-title{font-family:'Manrope',sans-serif;font-size:22px;font-weight:800;color:var(--noir);margin-bottom:6px!important}
.sim .mr-subtitle{font-size:13.5px;color:var(--bleu-fonce);font-weight:600;margin-bottom:22px!important}
.sim .modal-field{margin-bottom:14px!important;position:relative}
.sim .modal-row{display:grid!important;grid-template-columns:1fr 1fr;gap:10px}
@media(max-width:480px){.sim .modal-row{grid-template-columns:1fr!important}}
.sim .field-err{
  font-size:11px;color:var(--danger);margin-top:3px;
  display:none;align-items:center;gap:4px;line-height:1.3;
}
.sim .field-err.show{display:flex}
.sim .field-err svg{width:12px;height:12px;flex-shrink:0}
.sim .hp-field{position:absolute;left:-9999px;top:-9999px;opacity:0;height:0;width:0;overflow:hidden;pointer-events:none}
.sim .btn-modal{
  width:100%;height:50px;background:var(--noir)!important;color:var(--blanc)!important;border:none!important;
  border-radius:100px!important;font-family:'Manrope',sans-serif!important;font-size:14.5px!important;
  font-weight:800;cursor:pointer;transition:all 0.2s;
  display:flex!important;align-items:center;justify-content:center;gap:8px;margin-top:6px;
  box-shadow:0 4px 14px rgba(19,27,29,0.15);
}
.sim .btn-modal:hover{box-shadow:0 0 0 2px var(--blanc) inset}
.sim .btn-modal:disabled{opacity:0.5;cursor:not-allowed;transform:none}
.sim .btn-modal svg{width:16px;height:16px}
.sim .modal-legal{font-size:10.5px;color:var(--text-3);text-align:center;margin-top:10px!important;line-height:1.5}
.sim .modal-legal a{color:var(--bleu-fonce);text-decoration:underline!important;text-underline-offset:2px}
.sim .modal-close{
  position:absolute;top:12px;right:12px;width:28px;height:28px;
  border-radius:50%;border:none;background:rgba(0,0,0,0.06);
  color:var(--text-3);cursor:pointer;display:flex;align-items:center;justify-content:center;
  z-index:2;transition:background 0.2s;
}
.sim .modal-close:hover{background:rgba(0,0,0,0.1);color:var(--noir)}
@keyframes spin{to{transform:rotate(360deg)}}

/* ══════════════════════════════════
   RESULTS
   ══════════════════════════════════ */
.sim .results{display:none}
.sim .results.visible{display:block;animation:fadeUp 0.4s ease}
@keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}

.sim .result-hero{
  background:var(--noir);border-radius:var(--radius);
  padding:32px 28px!important;color:var(--blanc);margin-bottom:16px!important;
  position:relative;overflow:hidden;
}
.sim .result-hero::before{
  content:'';position:absolute;top:-60%;right:-20%;width:400px;height:400px;
  background:radial-gradient(circle,rgba(208,237,237,0.08) 0%,transparent 70%);pointer-events:none;
}
.sim .rh-over{
  font-family:'Inter',sans-serif;font-size:11px;font-weight:600;
  text-transform:uppercase;letter-spacing:1px;opacity:0.4;margin-bottom:8px;
}
.sim .rh-heading{
  font-family:'Manrope',sans-serif;font-size:clamp(18px,3vw,24px);
  font-weight:800;line-height:1.25;margin-bottom:6px;
}
.sim .rh-heading em{font-style:normal;color:var(--vert-eau)}
.sim .rh-sub{font-size:13.5px;opacity:0.5;margin-bottom:24px;max-width:480px}
.sim .rh-fleet-total{font-size:20px;font-weight:800;color:var(--vert-eau);margin-top:6px;margin-bottom:0;display:none}
.sim .rh-boxes{display:grid;grid-template-columns:1fr auto 1fr;gap:0;align-items:center}
@media(max-width:600px){.sim .rh-boxes{grid-template-columns:1fr;gap:14px}}
.sim .rh-box{
  background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);
  border-radius:var(--radius-sm);padding:18px!important;text-align:center;
}
.sim .rh-box.reco{background:rgba(208,237,237,0.08);border-color:rgba(208,237,237,0.15)}
.sim .rh-box .rb-tag{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:0.5px;opacity:0.4;margin-bottom:2px}
.sim .rh-box.reco .rb-tag{opacity:0.7;color:var(--vert-eau)}
.sim .rh-box .rb-label{font-size:12.5px;opacity:0.6;margin-bottom:8px}
.sim .rh-box .rb-val{font-family:'JetBrains Mono',monospace;font-size:26px;font-weight:700}
.sim .rh-box.reco .rb-val{color:var(--vert-eau)}
.sim .rh-box .rb-foot{font-size:11px;opacity:0.35;margin-top:4px}
.sim .rh-arrow{display:flex;flex-direction:column;align-items:center;gap:3px;padding:0 14px!important}
.sim .rh-arrow svg{width:24px;height:24px;stroke:var(--vert-eau);opacity:0.6}
.sim .rh-arrow-val{font-family:'JetBrains Mono',monospace;font-size:14px;font-weight:700;color:var(--vert-eau)}
@media(max-width:600px){
  .sim .rh-arrow{flex-direction:row;padding:0!important;justify-content:center}
  .sim .rh-arrow svg{transform:rotate(90deg)}
}

/* ── Detail Cards ── */
.sim .detail-grid{display:grid!important;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px;margin-top:8px}
@media(max-width:640px){.sim .detail-grid{grid-template-columns:1fr!important}}
.sim .detail-card{position:relative}
.sim .detail-card.dc-reco{border:2px solid var(--vert-eau)!important}
.sim .detail-card.dc-base{border:1px solid var(--border)!important;opacity:0.85}
.sim .dc-head{padding:16px 20px 10px!important;display:flex;align-items:center;justify-content:space-between}
.sim .dc-title{font-family:'Manrope',sans-serif;font-size:14px;font-weight:700}
.sim .dc-tag{font-size:9.5px;font-weight:700;text-transform:uppercase;letter-spacing:0.5px;padding:3px 10px;border-radius:100px}
.sim .dc-tag-reco{background:var(--vert-pastel);color:var(--bleu-fonce)}
.sim .dc-tag-base{background:var(--surface-alt);color:var(--text-3)}
.sim .dc-body{padding:0 20px 18px!important}
.sim .dc-total-val{
  font-family:'JetBrains Mono',monospace;font-size:22px;font-weight:700;
  color:var(--text);margin-bottom:14px!important;
}
.sim .dc-reco .dc-total-val{color:#1A8A84}
.sim .dr{display:flex;justify-content:space-between;align-items:center;padding:7px 0!important;font-size:13px}
.sim .dr+.dr{border-top:1px solid var(--border-light)}
.sim .dr .dl{color:var(--text-2)}
.sim .dr .dv{font-family:'JetBrains Mono',monospace;font-size:13px;font-weight:500;color:var(--text)}
.sim .dc-foot{
  border-top:2px solid var(--border);margin-top:6px!important;padding-top:10px!important;
  display:flex;justify-content:space-between;align-items:center;
}
.sim .dc-foot .dl{font-weight:700;color:var(--text);font-size:13px}
.sim .dc-foot .dv{font-family:'JetBrains Mono',monospace;font-size:13px;font-weight:600;color:var(--text-2)}
.sim .dc-reco .dc-foot .dv{color:#1A8A84}

/* ── Metrics row ── */
.sim .metric-row{
  display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px!important;
}
@media(max-width:640px){.sim .metric-row{grid-template-columns:1fr!important}}
.sim .metric-box{
  background:var(--surface);border:1px solid var(--border);
  border-radius:var(--radius-sm);padding:16px 20px!important;
  display:flex;align-items:center;justify-content:space-between;
}
.sim .mb-label{font-size:13px;font-weight:600;color:var(--text-2)}
.sim .mb-values{display:flex;gap:16px;align-items:baseline}
.sim .mb-val{font-family:'JetBrains Mono',monospace;font-size:15px;font-weight:700}
.sim .mb-val.v-actuel{color:var(--text-3)}
.sim .mb-val.v-elec{color:#1A8A84}
.sim .mb-val-label{font-size:10px;color:var(--text-3);font-weight:600;text-transform:uppercase;letter-spacing:0.3px}

/* ── Charts ── */
.sim .charts-toggle{
  width:100%;padding:14px 20px!important;background:var(--surface);border:1px solid var(--border);
  border-radius:var(--radius);cursor:pointer;font-family:'Inter',sans-serif;
  display:flex;align-items:center;justify-content:center;gap:6px;
  font-size:13px;font-weight:600;color:var(--bleu-fonce);
  transition:all 0.2s;box-shadow:var(--shadow);margin-bottom:16px!important;
}
.sim .charts-toggle:hover{border-color:var(--text-3)}
.sim .charts-toggle svg{width:16px;height:16px;transition:transform 0.3s}
.sim .charts-toggle.open svg{transform:rotate(180deg)}
.sim .charts-content{display:none;margin-bottom:16px!important}
.sim .charts-content.open{display:block;animation:fadeUp 0.3s ease}

.sim .chart-section{
  background:var(--surface);border:1px solid var(--border);
  border-radius:var(--radius);padding:20px!important;margin-bottom:12px!important;
  box-shadow:var(--shadow);
}
.sim .chart-title{font-family:'Manrope',sans-serif;font-size:14px;font-weight:700;color:var(--text);margin-bottom:16px!important}

/* Bar chart */
.sim .chart-bars{display:flex;align-items:flex-end;justify-content:space-around;height:180px;padding-bottom:30px!important;position:relative}
.sim .chart-bars::after{content:'';position:absolute;bottom:28px;left:0;right:0;height:1px;background:var(--border)}
.sim .bar-group{display:flex;flex-direction:column;align-items:center;flex:1;max-width:100px}
.sim .bar-pair{display:flex;gap:4px;align-items:flex-end;height:140px}
.sim .bar{width:28px;border-radius:4px 4px 0 0;min-height:4px;position:relative;transition:height 0.5s ease}
.sim .bar-a{background:#E8943A}
.sim .bar-e{background:#1A8A84}
.sim .bar::after{
  content:attr(data-val);position:absolute;top:-18px;left:50%;transform:translateX(-50%);
  font-family:'JetBrains Mono',monospace;font-size:9px;font-weight:600;color:var(--text-2);
  white-space:nowrap;
}
.sim .bar-label{font-size:10px;font-weight:600;color:var(--text-3);margin-top:8px;text-align:center}

/* Chart legend */
.sim .chart-legend{display:flex;gap:16px;justify-content:center;margin-bottom:14px!important}
.sim .chart-legend-item{display:flex;align-items:center;gap:5px;font-size:11px;font-weight:600;color:var(--text-2)}
.sim .cl-dot{width:10px;height:10px;border-radius:2px;flex-shrink:0}

/* Stacked bars */
.sim .stacked-bars{display:flex;flex-direction:column;gap:10px}
.sim .stack-row{display:flex;align-items:center;gap:10px}
.sim .stack-label{font-size:11px;font-weight:700;color:var(--text-2);width:70px;flex-shrink:0;text-align:right}
.sim .stack-track{flex:1;display:flex;height:28px;border-radius:6px;overflow:hidden}
.sim .stack-track .seg{min-width:2px;transition:width 0.5s ease}
.sim .stack-total{font-family:'JetBrains Mono',monospace;font-size:12px;font-weight:700;color:var(--text);width:70px;flex-shrink:0}

/* Stacked legend */
.sim .stacked-legend{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-top:14px!important}
.sim .stacked-legend-item{display:flex;align-items:center;gap:4px;font-size:10px;font-weight:600;color:var(--text-2)}
.sim .sl-dot{width:8px;height:8px;border-radius:2px;flex-shrink:0}

/* Donut charts */
.sim .donut-row{display:grid;grid-template-columns:1fr 1fr;gap:20px}
@media(max-width:640px){.sim .donut-row{grid-template-columns:1fr!important}}
.sim .donut-wrap{display:flex;flex-direction:column;align-items:center;gap:10px}
.sim .donut-label{font-family:'Manrope',sans-serif;font-size:12px;font-weight:700;color:var(--text);text-transform:uppercase;letter-spacing:0.5px}
.sim .donut{width:130px;height:130px;border-radius:50%;position:relative}
.sim .donut::after{
  content:'';position:absolute;inset:28%;border-radius:50%;background:var(--surface);
}
.sim .donut-legend{display:flex;flex-direction:column;gap:4px;margin-top:4px!important}
.sim .donut-legend-item{display:flex;align-items:center;gap:5px;font-size:10px;color:var(--text-2);font-weight:500}
.sim .dl-dot{width:8px;height:8px;border-radius:2px;flex-shrink:0}

/* ══════════════════════════════════
   EVERA FLEET SOLUTIONS
   ══════════════════════════════════ */
.sim .sol-section{margin-top:8px!important;margin-bottom:20px!important}
.sim .sol-header{
  font-family:'Manrope',sans-serif;font-size:18px;font-weight:800;
  color:var(--text);margin-bottom:6px!important;text-align:center;
}
.sim .sol-sub{font-size:13px;color:var(--text-2);text-align:center;margin-bottom:20px!important;max-width:500px;margin-left:auto;margin-right:auto}
.sim .sol-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px!important}
@media(max-width:640px){.sim .sol-grid{grid-template-columns:1fr!important}}
.sim .sol-grid-3{grid-template-columns:1fr 1fr 1fr!important}
@media(max-width:640px){.sim .sol-grid-3{grid-template-columns:1fr!important}}
.sim .sol-card{
  background:var(--surface);border:1px solid var(--border);
  border-radius:var(--radius);padding:20px!important;
  box-shadow:var(--shadow);transition:all 0.2s;
}
.sim .sol-card:hover{border-color:var(--vert-eau);box-shadow:var(--shadow-lg)}
.sim .sc-head{display:flex;align-items:flex-start;gap:12px;margin-bottom:10px!important}
.sim .sc-icon{
  width:36px!important;height:36px!important;min-width:36px!important;border-radius:8px;
  display:flex!important;align-items:center!important;justify-content:center!important;
}
.sim .sc-icon .ico{width:18px;height:18px}
.sim .sc-icon-green{background:var(--vert-pastel);color:#1A8A84}
.sim .sc-icon-amber{background:rgba(232,148,58,0.12);color:#E8943A}
.sim .sc-icon-blue{background:rgba(99,118,141,0.12);color:var(--bleu-fonce)}
.sim .sc-icon-red{background:rgba(196,85,78,0.12);color:#C4554E}
.sim .sc-icon-dark{background:rgba(19,27,29,0.08);color:var(--noir)}
.sim .sc-head-text{flex:1}
.sim .sc-title{font-family:'Manrope',sans-serif;font-size:13px;font-weight:700;color:var(--text)}
.sim .sc-amount{font-family:'JetBrains Mono',monospace;font-size:18px;font-weight:700;color:#1A8A84;margin-top:2px}
.sim .sc-desc{font-size:12px;color:var(--text-2);line-height:1.5;margin-bottom:12px!important}
.sim .sc-btns{display:flex;gap:8px;flex-wrap:wrap}
.sim .sc-btn{
  display:inline-flex;align-items:center;gap:4px;
  padding:6px 14px!important;border-radius:6px;font-size:11px;font-weight:700;
  cursor:pointer;transition:all 0.2s;
  font-family:'Manrope',sans-serif;
}
.sim .sc-btn-main{background:var(--noir);color:var(--blanc);border:none}
.sim .sc-btn-main:hover{opacity:0.85}
.sim .sc-btn-outline{background:transparent;color:var(--text-2);border:1.5px solid var(--border)}
.sim .sc-btn-outline:hover{border-color:var(--text-3)}
.sim .sc-btn .ico{width:12px;height:12px}

/* ── Savings total bar ── */
.sim .savings-bar{
  background:linear-gradient(135deg, #1E2A2D 0%, #131B1D 100%);
  border-radius:var(--radius);padding:24px 28px!important;color:var(--blanc);
  margin-bottom:16px!important;position:relative;overflow:hidden;
}
.sim .savings-bar::before{
  content:'';position:absolute;top:-40%;right:-20%;width:300px;height:300px;
  background:radial-gradient(circle,rgba(208,237,237,0.06) 0%,transparent 70%);pointer-events:none;
}
.sim .sb-title{font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:0.8px;opacity:0.5;margin-bottom:6px!important}
.sim .sb-amount{font-family:'JetBrains Mono',monospace;font-size:28px;font-weight:700;color:var(--vert-eau);margin-bottom:4px!important}
.sim .sb-fleet{font-size:14px;color:var(--vert-eau);opacity:0.8;margin-bottom:12px!important;display:none}
.sim .sb-chips{display:flex;gap:8px;flex-wrap:wrap;position:relative}
.sim .sav-chip{
  display:inline-flex;align-items:center;
  font-family:'JetBrains Mono',monospace;font-size:11px;font-weight:600;
  padding:4px 10px!important;border-radius:100px;border:1px solid;
}

/* ── Fleet CTA ── */
.sim .fleet-cta{
  background:var(--surface);border:1.5px solid var(--border);
  border-radius:var(--radius);padding:24px 28px!important;margin-bottom:16px!important;
  display:flex;align-items:center;justify-content:space-between;gap:20px;flex-wrap:wrap;
}
.sim .fc-text{flex:1;min-width:240px}
.sim .fc-text-title{font-family:'Manrope',sans-serif;font-size:15px;font-weight:700;color:var(--noir);margin-bottom:4px}
.sim .fc-text-desc{font-size:13px;color:var(--bleu-fonce);line-height:1.5}
.sim .fc-btns{display:flex;gap:10px;flex-shrink:0;flex-wrap:wrap}
.sim .btn-fleet-main{
  display:inline-flex!important;align-items:center;gap:8px;
  height:44px;padding:0 24px!important;background:var(--noir)!important;color:var(--blanc)!important;
  border:none!important;border-radius:var(--radius-sm)!important;font-family:'Manrope',sans-serif!important;
  font-size:14px!important;font-weight:700;cursor:pointer;transition:all 0.2s;
}
.sim .btn-fleet-main:hover{box-shadow:0 0 0 2px var(--blanc) inset}
.sim .btn-fleet-main .ico{width:16px;height:16px}
.sim .btn-fleet-outline{
  display:inline-flex!important;align-items:center;gap:8px;
  height:44px;padding:0 24px!important;background:var(--surface)!important;color:var(--text)!important;
  border:1.5px solid var(--border)!important;border-radius:var(--radius-sm)!important;font-family:'Manrope',sans-serif!important;
  font-size:14px!important;font-weight:600;cursor:pointer;transition:all 0.2s;
}
.sim .btn-fleet-outline:hover{border-color:var(--text-3)}
.sim .btn-fleet-outline .ico{width:15px;height:15px;color:var(--text-3)}
@media(max-width:600px){.sim .fleet-cta{flex-direction:column;text-align:center}.sim .fc-btns{justify-content:center}}

/* ── Calc Debug ── */
.sim .calc-debug{display:none;background:#F8FAFB;border:1px solid #E0E7EB;border-radius:12px;padding:24px 28px!important;margin-bottom:20px;font-size:12px;line-height:1.7}
.sim .calc-debug h4{font-family:'Manrope',sans-serif;font-size:15px;font-weight:800;color:var(--noir);margin:0 0 16px;padding-bottom:8px;border-bottom:2px solid var(--border)}
.sim .calc-debug h5{font-family:'Manrope',sans-serif;font-size:12px;font-weight:700;text-transform:uppercase;letter-spacing:0.5px;color:var(--bleu-fonce);margin:16px 0 6px;padding-top:8px}
.sim .calc-debug .cd-row{display:flex;justify-content:space-between;padding:3px 0;border-bottom:1px dashed var(--border-light)}
.sim .calc-debug .cd-val{font-family:'JetBrains Mono',monospace;font-weight:600;color:var(--noir);white-space:nowrap}
.sim .calc-debug .cd-eco{margin-top:12px;background:#E2F3F2;padding:10px 14px!important;border-radius:8px;font-family:'JetBrains Mono',monospace;font-size:13px;font-weight:700;color:#1A8A84}

/* ── Misc ── */
.sim .new-wrap{text-align:center;margin-top:24px}
.sim .btn-new{
  display:inline-flex!important;align-items:center;gap:6px;
  padding:10px 22px!important;border:1.5px solid var(--border)!important;border-radius:60px!important;
  background:var(--surface)!important;font-family:'Inter',sans-serif!important;font-size:13px!important;
  font-weight:600;color:var(--text-2)!important;cursor:pointer;transition:all 0.2s;
}
.sim .btn-new:hover{border-color:var(--noir)}
.sim .btn-new svg{width:14px;height:14px}
.sim .sim-foot{text-align:center;font-size:11px;color:var(--text-3);margin-top:28px;line-height:1.6}

/* ── Utilities ── */
.sim .ico-toggle{width:16px;height:16px;vertical-align:-3px;margin-right:4px;color:var(--bleu-fonce)}
.sim .ico-lg{width:20px!important;height:20px!important}
.sim .ico-sm{width:16px!important;height:16px!important}
.sim .ico-xs{width:14px!important;height:14px!important}
.sim .mb-14{margin-bottom:14px!important}
.sim .mb-12{margin-bottom:12px!important}
.sim .mt-8{margin-top:8px!important}
.sim .mt-12{margin-top:12px!important}
.sim .mt-16{margin-top:16px!important}
.sim .mt-18{margin-top:18px!important}
.sim .spacer-10{height:10px!important;min-height:10px!important}
.sim .no-decoration{text-decoration:none!important}
.sim .fleet-input-wrap{width:72px}
.sim .fleet-input{text-align:center;padding:6px 8px!important;font-size:13px}
